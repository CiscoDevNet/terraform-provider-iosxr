---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "iosxr_segment_routing_te_policy Resource - terraform-provider-iosxr"
subcategory: "Segment Routing"
description: |-
  This resource can manage the Segment Routing TE Policy configuration.
---

# iosxr_segment_routing_te_policy (Resource)

This resource can manage the Segment Routing TE Policy configuration.

## Example Usage

```terraform
resource "iosxr_segment_routing_te_policy" "example" {
  policy_name                       = "POLICY1"
  ipv6_disable                      = true
  transit_eligible                  = true
  shutdown                          = false
  bandwidth                         = 100000
  pce_group                         = "PCE-1"
  binding_sid_type                  = "mpls-label-specified"
  binding_sid_mpls_label            = 16501
  steering_labeled_services_disable = true
  steering_invalidation_drop        = true
  policy_color                      = 20
  policy_color_endpoint_type        = "end-point-type-ipv4"
  policy_color_endpoint_address     = "192.168.1.1"
  auto_route_include_all_ipv6       = true
  auto_route_force_sr_include       = true
  auto_route_forward_class          = 1
  auto_route_metric_type            = "relative"
  auto_route_metric_relative_value  = -10
  auto_route_metric_constant_value  = 100
  auto_route_include_prefixes = [
    {
      af_type = "af-type-ipv4"
      address = "192.168.2.0"
      length  = 24
    }
  ]
  candidate_paths_preferences = [
    {
      path_index                                   = 1
      pce_group                                    = "PCE-1"
      constraints_disjoint_path_group_id           = 10
      constraints_disjoint_path_type               = "link"
      constraints_disjoint_path_sub_id             = 1
      constraints_disjoint_path_shortest_path      = true
      constraints_disjoint_path_fallback_disable   = true
      constraints_segment_rules_protection_type    = "protected-preferred"
      constraints_segment_rules_sid_algorithm      = 128
      constraints_segment_rules_adjacency_sid_only = true
      constraints_affinity_rules = [
        {
          affinity_type = "affinity-exclude-any"
          affinities = [
            {
              affinity_name = "AFFINITY-1"
            }
          ]
        }
      ]
      constraints_bounds = [
        {
          type        = "bound-scope-cumulative"
          metric_type = "latency"
          value       = 100000
        }
      ]
      bidirectional_association_id = 10
      bidirectional_corouted       = true
      paths = [
        {
          type                   = "dynamic"
          hop_type               = "mpls"
          segment_list_name      = "dynamic"
          sticky                 = true
          metric_sid_limit       = 6
          metric_type            = "latency"
          metric_margin_type     = "relative"
          metric_margin_relative = 100
          anycast                = true
          pcep                   = true
        }
      ]
      backup_ineligible      = true
      effective_metric_value = 1000
      effective_metric_type  = "igp"
    }
  ]
  performance_measurement_liveness_profile                      = "LIVENESS-PROFILE-1"
  performance_measurement_liveness_backup_profile               = "LIVENESS-PROFILE-2"
  performance_measurement_liveness_logging_session_state_change = true
  performance_measurement_liveness_invalidation_action          = "invalid-ation-action-down"
  performance_measurement_reverse_path_segment_list             = "SEG-1"
  source_address_type                                           = "end-point-type-ipv4"
  source_address                                                = "192.168.1.1"
  effective_metric_value                                        = 1000
  effective_metric_type                                         = "igp"
  srv6_locator_name                                             = "LOC1"
  srv6_locator_binding_sid_type                                 = "srv6-dynamic"
  srv6_locator_behavior                                         = "ub6-insert-reduced"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policy_name` (String) Policy name

### Optional

- `auto_route_force_sr_include` (Boolean) Force policy to carry SR MPLS traffic as well
- `auto_route_forward_class` (Number) Forward class associated with the policy
  - Range: `0`-`7`
- `auto_route_include_all_ipv4` (Boolean) Include all eligible IPv4 prefixes
- `auto_route_include_all_ipv6` (Boolean) Include all eligible IPv6 prefixes
- `auto_route_include_prefixes` (Attributes List) Autoroute IP prefix to include (limited to IPv4 prefixes) (see [below for nested schema](#nestedatt--auto_route_include_prefixes))
- `auto_route_metric_constant_value` (Number) Autoroute constant metric
  - Range: `1`-`2147483647`
- `auto_route_metric_relative_value` (Number) Autoroute relative metric
  - Range: `-10`-`10`
- `auto_route_metric_type` (String) Metric type
  - Choices: `constant`, `relative`
- `bandwidth` (Number) The value of the bandwidth reserved by this policy in kbps
  - Range: `1`-`4294967295`
- `bfd_disable` (Boolean) Do not create BFD sessions
- `bfd_enable` (Boolean) Bidirectional Forwarding Detection (BFD)
- `bfd_invalidation_action` (String) Action to be taken when BFD session is invalidated
  - Choices: `invalid-ation-action-down`, `invalid-ation-action-none`
- `bfd_logging_session_state_change` (Boolean) Emit syslog when the state of the session changes
- `bfd_minimum_interval` (Number) Hello interval in milliseconds (default 150)
  - Range: `50`-`30000`
- `bfd_multiplier` (Number) Number of missed BFD packets to declare session down (default 3)
  - Range: `1`-`10`
- `bfd_reverse_path_binding_label` (Number) Binding label of a policy/tunnel from destination to head-end
  - Range: `16`-`1048575`
- `binding_sid_mpls_label` (Number) MPLS Label
  - Range: `16`-`1048575`
- `binding_sid_type` (String) Binding SID type
  - Choices: `mpls-label-any`, `mpls-label-specified`
- `candidate_paths_preferences` (Attributes List) Policy path-option preference entry (see [below for nested schema](#nestedatt--candidate_paths_preferences))
- `delete_mode` (String) Configure behavior when deleting/destroying the resource. Either delete the entire object (YANG container) being managed, or only delete the individual resource attributes configured explicitly and leave everything else as-is. Default value is `all`.
  - Choices: `all`, `attributes`
- `device` (String) A device name from the provider configuration.
- `effective_metric_type` (String) Metric type, advertised to other protocols
  - Choices: `default`, `hopcount`, `igp`, `latency`, `te`
- `effective_metric_value` (Number) Integer value of metric
  - Range: `0`-`4294967295`
- `ipv6_disable` (Boolean) IPv6 disable
- `max_install_standby_paths` (Number) Allow additional candidate paths to warm up non forwarding LSPs
  - Range: `0`-`3`
- `path_protection` (Boolean) Candidate path protection
- `pce_group` (String) Name of the PCE group - maximum 16 characters
- `performance_measurement_delay_logging_delay_exceeded` (Boolean) Emit syslog when the delay exceeds the threshold
- `performance_measurement_delay_profile` (String) SR Policy delay profile name
- `performance_measurement_liveness_backup_profile` (String) SR Policy delay profile name
- `performance_measurement_liveness_invalidation_action` (String) Action to be taken when PM liveness session is invalidated
  - Choices: `invalid-ation-action-down`, `invalid-ation-action-none`
- `performance_measurement_liveness_logging_session_state_change` (Boolean) Emit syslog when the state of the session changes
- `performance_measurement_liveness_profile` (String) SR Policy delay profile name
- `performance_measurement_reverse_path_label` (Number) PM packets return to head-end using a label - DEPRECATED (will be removed in 27.1.1)
  - Range: `16`-`1048575`
- `performance_measurement_reverse_path_segment_list` (String) PM packets return to head-end using segment-list
- `policy_color` (Number) Color
  - Range: `1`-`4294967295`
- `policy_color_endpoint_address` (String) End point address
- `policy_color_endpoint_type` (String) End point type
  - Choices: `end-point-type-ipv4`, `end-point-type-ipv6`
- `shutdown` (Boolean) Administratively shutdown policy
- `source_address` (String) Source address
- `source_address_type` (String) IP address type
  - Choices: `end-point-type-ipv4`, `end-point-type-ipv6`
- `srv6_locator_behavior` (String) SRv6 USID Behavior
  - Choices: `ub6-encaps-reduced`, `ub6-insert-reduced`
- `srv6_locator_binding_sid_type` (String) Binding Segment ID type
  - Choices: `srv6-dynamic`
- `srv6_locator_name` (String) SRv6 locator name
- `steering_invalidation_drop` (Boolean) Enable path invalidation drop
- `steering_labeled_services_disable` (Boolean) Disable all steering services
- `transit_eligible` (Boolean) Mark the policy as eligible for transit by other policies

### Read-Only

- `id` (String) The path of the object.

<a id="nestedatt--auto_route_include_prefixes"></a>
### Nested Schema for `auto_route_include_prefixes`

Required:

- `address` (String) Autoroute prefix IP address
- `af_type` (String) Address family type
  - Choices: `af-type-all`, `af-type-ipv4`, `af-type-ipv6`
- `length` (Number) Autoroute IP prefix length
  - Range: `0`-`32`


<a id="nestedatt--candidate_paths_preferences"></a>
### Nested Schema for `candidate_paths_preferences`

Required:

- `path_index` (Number) Path-option preference
  - Range: `1`-`65535`

Optional:

- `backup_ineligible` (Boolean) Candidate path is backup ineligible
- `bidirectional_association_id` (Number) 16-bit Association ID
  - Range: `1`-`65534`
- `bidirectional_corouted` (Boolean) True only
- `constraints_affinity_rules` (Attributes List) SR path computation and verification affinity rule (see [below for nested schema](#nestedatt--candidate_paths_preferences--constraints_affinity_rules))
- `constraints_bounds` (Attributes List) SR path computation and verification metric bound (see [below for nested schema](#nestedatt--candidate_paths_preferences--constraints_bounds))
- `constraints_disjoint_path_fallback_disable` (Boolean) Disable fallback behavior
- `constraints_disjoint_path_group_id` (Number) Group ID
  - Range: `1`-`65535`
- `constraints_disjoint_path_shortest_path` (Boolean) Force shortest-path computation
- `constraints_disjoint_path_sub_id` (Number) Sub ID
  - Range: `0`-`65535`
- `constraints_disjoint_path_type` (String) Disjointness Type
  - Choices: `link`, `node`, `srlg`, `srlg-node`
- `constraints_segment_rules_adjacency_sid_only` (Boolean) Use only adjacency segment IDs
- `constraints_segment_rules_protection_type` (String) Protection Type
  - Choices: `protected-only`, `protected-preferred`, `unprotected-only`, `unprotected-preferred`
- `constraints_segment_rules_sid_algorithm` (Number) '0' for regular SIDs, '1' for strict-spf SIDs, '128' - '255' for flexible algorithm SIDs
  - Range: `0`-`255`
- `effective_metric_type` (String) Metric type, advertised to other protocols
  - Choices: `default`, `hopcount`, `igp`, `latency`, `te`
- `effective_metric_value` (Number) Integer value of metric
  - Range: `0`-`4294967295`
- `lock_duration` (Number) Keep protect cpath locked as active lsp after higher preference cpath lsp is made standby
  - Range: `0`-`3000`
- `paths` (Attributes List) Policy configuration (see [below for nested schema](#nestedatt--candidate_paths_preferences--paths))
- `pce_group` (String) Name of the PCE group - maximum 16 characters
- `per_flow` (Boolean) True only
- `per_flow_forward_class_default` (Number) Default forward class entry
  - Range: `0`-`7`
- `per_flow_forward_classes` (Attributes List) Policy per-flow forward class entry and colorForwardClass, Color (see [below for nested schema](#nestedatt--candidate_paths_preferences--per_flow_forward_classes))

<a id="nestedatt--candidate_paths_preferences--constraints_affinity_rules"></a>
### Nested Schema for `candidate_paths_preferences.constraints_affinity_rules`

Required:

- `affinity_type` (String) Affinity rule type
  - Choices: `affinity-exclude-any`, `affinity-include-all`, `affinity-include-any`

Optional:

- `affinities` (Attributes List) Affinity rule name (see [below for nested schema](#nestedatt--candidate_paths_preferences--constraints_affinity_rules--affinities))

<a id="nestedatt--candidate_paths_preferences--constraints_affinity_rules--affinities"></a>
### Nested Schema for `candidate_paths_preferences.constraints_affinity_rules.affinities`

Required:

- `affinity_name` (String) Affinity name



<a id="nestedatt--candidate_paths_preferences--constraints_bounds"></a>
### Nested Schema for `candidate_paths_preferences.constraints_bounds`

Required:

- `metric_type` (String) Metric type to bound
  - Choices: `hopcount`, `igp`, `latency`, `te`
- `type` (String) Scope of the bound
  - Choices: `bound-scope-cumulative`, `bound-scope-link`, `bound-scope-none`
- `value` (Number) Metric Bound Value
  - Range: `1`-`4294967295`


<a id="nestedatt--candidate_paths_preferences--paths"></a>
### Nested Schema for `candidate_paths_preferences.paths`

Required:

- `type` (String) Path-option type
  - Choices: `dynamic`, `explicit`

Optional:

- `anycast` (Boolean) Anycast Prefix SID Inclusion
- `hop_type` (String) Type of dynamic path to be computed
  - Choices: `mpls`, `srv6`
- `metric_margin_absolute` (Number) Absolute metric value
  - Range: `0`-`2147483647`
- `metric_margin_relative` (Number) Relative metric value
  - Range: `0`-`2147483647`
- `metric_margin_type` (String) Metric margin type
  - Choices: `absolute`, `relative`
- `metric_sid_limit` (Number) Maximum number of SIDs
  - Range: `1`-`255`
- `metric_type` (String) Metric type
  - Choices: `hopcount`, `igp`, `latency`, `te`
- `pcep` (Boolean) Path Computation Element Protocol
- `reverse_path_segment_list` (String) Reverse Path Segment-list name
- `segment_list_name` (String) Segment-list name
- `sticky` (Boolean) Disable dynamic reroute configuration
- `weight` (Number) Path-option weight
  - Range: `1`-`4294967295`


<a id="nestedatt--candidate_paths_preferences--per_flow_forward_classes"></a>
### Nested Schema for `candidate_paths_preferences.per_flow_forward_classes`

Required:

- `color` (Number) Color
  - Range: `1`-`4294967295`
- `forward_class` (Number) ForwardClass
  - Range: `0`-`7`

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import iosxr_segment_routing_te_policy.example "<policy_name>"
```
