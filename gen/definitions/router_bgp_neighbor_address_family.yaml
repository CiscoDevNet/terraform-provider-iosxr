---
name: Router BGP Neighbor Address Family
path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=%s]/neighbors/neighbor[address=%s]/address-families/address-family[af-name=%s]
doc_category: BGP
attributes:
  - yang_name: as-number
    example: 65001
  - yang_name: address
    example: 10.1.1.2
  - yang_name: af-name
    example: vpnv4-unicast
  - yang_name: encapsulation-type
    example: srv6
  - yang_name: weight
    example: 100
  - yang_name: multipath
    example: true
  - yang_name: use/af-group
    exclude_test: true
    example: AFGROUP1
  - yang_name: capability/orf/prefix/capability-receive-orf-neighbor
    tf_name: capability_orf_prefix
    exclude_test: true
    example: both
  - yang_name: additional-paths/send
    example: true
  - yang_name: additional-paths/send/disable
    exclude_test: true
    example: true
  - yang_name: additional-paths/receive
    example: true
  - yang_name: additional-paths/receive/disable
    exclude_test: true
    example: true
  - yang_name: default-originate
    tf_name: default_originate
    example: true
  - yang_name: default-originate/DEFAULT-ORIGINATE/ROUTE-POLICY/route-policy
    tf_name: default_originate_route_policy
    xpath: default-originate/route-policy
    delete_parent: true
    example: ROUTE_POLICY_1
  - yang_name: default-originate/DEFAULT-ORIGINATE/INHERITANCE-DISABLE/inheritance-disable
    tf_name: default_originate_inheritance_disable
    xpath: default-originate/inheritance-disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: maximum-prefix/maximum-prefix-number
    tf_name: maximum_prefix_limit
    delete_parent: true
    optional: true
    example: 1248576
  - yang_name: maximum-prefix/threshold-value
    tf_name: maximum_prefix_threshold
    delete_parent: true
    optional: true
    example: 80
  - yang_name: maximum-prefix/restart
    delete_parent: true
    example: 5
    exclude_test: true
  - yang_name: maximum-prefix/discard-extra-paths
    delete_parent: true
    example: true
    exclude_test: true
  - yang_name: maximum-prefix/warning-only
    delete_parent: true
    example: true
  - yang_name: next-hop-self
    example: true
  - yang_name: next-hop-self/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: next-hop-unchanged/next-hop-unchanged-enable
    tf_name: next_hop_unchanged
    exclude_test: true
    example: true
  - yang_name: next-hop-unchanged/multipath
    exclude_test: true
    example: true
  - yang_name: next-hop-unchanged/next-hop-unchanged-enable/inheritance-disable
    tf_name: next_hop_unchanged_inheritance_disable
    exclude_test: true
    example: true
  - yang_name: route-policy/in
    example: ROUTE_POLICY_1
  - yang_name: route-policy/out
    example: ROUTE_POLICY_1
  - yang_name: orf/route-policy
    exclude_test: true
    example: ROUTE_POLICY_1
  - yang_name: cluster-id/allow-equal
    example: true
  - yang_name: cluster-id/allow-equal/disable
    exclude_test: true
    example: true
  - yang_name: replace-private-as
    exclude_test: true
    example: true
  - yang_name: replace-private-as/internal
    exclude_test: true
    example: true
  - yang_name: remove-private-as/inbound
    exclude_test: true
    example: true
  - yang_name: remove-private-as/inbound/entire-aspath
    exclude_test: true
    example: true
  - yang_name: remove-private-as/inbound/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound
    tf_name: remove_private_as
    exclude_test: true
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound/entire-aspath
    tf_name: remove_private_as_entire_aspath
    exclude_test: true
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound/internal
    tf_name: remove_private_as_internal
    exclude_test: true
    example: true
  - yang_name: route-reflector-client
    example: true
  - yang_name: route-reflector-client/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: send-community-ebgp
    exclude_test: true
    example: true
  - yang_name: send-community-ebgp/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: send-community-gshut-ebgp
    exclude_test: true
    example: true
  - yang_name: send-community-gshut-ebgp/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: send-extended-community-ebgp
    exclude_test: true
    example: true
  - yang_name: send-extended-community-ebgp/inheritance-disable
    exclude_test: true
    example: true
  - yang_name: soft-reconfiguration/inbound
    exclude_test: true
    example: true
  - yang_name: soft-reconfiguration/inbound/always
    delete_parent: true
    example: true
  - yang_name: update/out/originator-loopcheck
    example: true
  - yang_name: update/out/originator-loopcheck/disable
    exclude_test: true
    example: true
  - yang_name: advertise/vpnv4/unicast/enable
    tf_name: advertise_vpnv4_unicast
    example: true
  - yang_name: advertise/vpnv4/unicast/enable/re-originated
    tf_name: advertise_vpnv4_unicast_re_originated
    delete_parent: true
    example: true
  - yang_name: advertise/vpnv4/unicast/enable/re-originated/stitching-rt
    tf_name: advertise_vpnv4_unicast_re_originated_stitching_rt
    delete_parent: true
    example: true
  - yang_name: advertise/vpnv6/unicast/enable
    tf_name: advertise_vpnv6_unicast
    example: true
  - yang_name: advertise/vpnv6/unicast/enable/re-originated
    tf_name: advertise_vpnv6_unicast_re_originated
    delete_parent: true
    example: true
  - yang_name: advertise/vpnv6/unicast/enable/re-originated/stitching-rt
    tf_name: advertise_vpnv6_unicast_re_originated_stitching_rt
    delete_parent: true
    example: true
  - yang_name: advertise/l2vpn/evpn/re-originated
    tf_name: advertise_l2vpn_evpn_re_originated
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: advertise/l2vpn/evpn/re-originated/stitching-rt
    tf_name: advertise_l2vpn_evpn_re_originated_stitching_rt
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: segment-routing/srv6/prefix-sid-type4
    tf_name: segment_routing_srv6_prefix_sid_type4
    delete_parent: true
    example: true
  - yang_name: import/IMPORT/STITCHING-RT/stitching-rt
    xpath: import/stitching-rt
    tf_name: import_stitching_rt
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: import/IMPORT/STITCHING-RT/stitching-rt/re-originate
    xpath: import/stitching-rt/re-originate
    tf_name: import_stitching_rt_re_originate
    exclude_test: true
    example: true
  - yang_name: import/IMPORT/STITCHING-RT/stitching-rt/re-originate/stitching-rt
    xpath: import/stitching-rt/re-originate/stitching-rt
    tf_name: import_stitching_rt_re_originate_stitching_rt
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: import/IMPORT/RE-ORIGINATE/re-originate
    xpath: import/re-originate
    tf_name: import_re_originate
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: allowas-in/number-of-occurrences-of-as-number
    tf_name: allowas_in
    example: 3
  - yang_name: allowconfedas-in/number-of-occurrences-of-confederation-number
    tf_name: allowconfedas_in
    example: 5
  # Device Bug: Does not show in UM output. DDTS to be filed.
  # - yang_name: long-lived-graceful-restart/capable
  #   exclude_test: true
  #   example: true
  # Device Bug: Rejects set operations on stale-time/send and stale-time/accept with
  # 'Operation failed'. DDTS to be filed.
  # - yang_name: long-lived-graceful-restart/stale-time/send
  #   tf_name: long_lived_graceful_restart_stale_time_send
  #   delete_parent: true
  #   example: 120
  # - yang_name: long-lived-graceful-restart/stale-time/accept
  #   tf_name: long_lived_graceful_restart_stale_time_accept
  #   delete_parent: true
  #   example: 120
  - yang_name: site-of-origin/SITE-OF-ORIGIN/TWO-BYTE-AS/two-byte-as/two-byte-as-number
    xpath: site-of-origin/two-byte-as/two-byte-as-number
    tf_name: site_of_origin_two_byte_as_number
    optional: true
    delete_parent: true
    exclude_test: true
    example: 65001
  - yang_name: site-of-origin/SITE-OF-ORIGIN/TWO-BYTE-AS/two-byte-as/asn2-index
    xpath: site-of-origin/two-byte-as/asn2-index
    tf_name: site_of_origin_two_byte_as_index
    optional: true
    delete_parent: true
    exclude_test: true
    example: 100
  - yang_name: site-of-origin/SITE-OF-ORIGIN/FOUR-BYTE-AS/four-byte-as/four-byte-as-number
    xpath: site-of-origin/four-byte-as/four-byte-as-number
    tf_name: site_of_origin_four_byte_as_number
    optional: true
    delete_parent: true
    exclude_test: true
    example: 65536
  - yang_name: site-of-origin/SITE-OF-ORIGIN/FOUR-BYTE-AS/four-byte-as/asn4-index
    xpath: site-of-origin/four-byte-as/asn4-index
    tf_name: site_of_origin_four_byte_as_index
    optional: true
    delete_parent: true
    exclude_test: true
    example: 100
  - yang_name: site-of-origin/SITE-OF-ORIGIN/IPV4-ADDRESS/ipv4-address/address
    xpath: site-of-origin/ipv4-address/address
    tf_name: site_of_origin_ipv4_address
    optional: true
    delete_parent: true
    exclude_test: true
    example: 192.168.1.1
  - yang_name: site-of-origin/SITE-OF-ORIGIN/IPV4-ADDRESS/ipv4-address/ipv4address-index
    xpath: site-of-origin/ipv4-address/ipv4address-index
    tf_name: site_of_origin_ipv4_address_index
    optional: true
    delete_parent: true
    exclude_test: true
    example: 100
  - yang_name: as-override
    example: true
  - yang_name: as-override/inheritance-disable
    example: true
    exclude_test: true
  - yang_name: aigp/enable
    tf_name: aigp
    example: true
  - yang_name: aigp/enable/disable
    tf_name: aigp_disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: aigp/send/med
    example: true
  - yang_name: aigp/send/med/disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/DISABLE/disable
    xpath: aigp/send/cost-community/disable
    tf_name: aigp_send_cost_community_disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/COST-COMMUNITY-ID/cost-community-id/cost-community-id-number
    xpath: aigp/send/cost-community/cost-community-id/cost-community-id-number
    tf_name: aigp_send_cost_community_id
    delete_parent: true
    example: 5
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/COST-COMMUNITY-ID/cost-community-id/poi/igp-cost
    xpath: aigp/send/cost-community/cost-community-id/poi/igp-cost
    tf_name: aigp_send_cost_community_id_poi_igp_cost
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/COST-COMMUNITY-ID/cost-community-id/poi/igp-cost/transitive
    xpath: aigp/send/cost-community/cost-community-id/poi/igp-cost/transitive
    tf_name: aigp_send_cost_community_id_poi_igp_cost_transitive
    example: true
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/COST-COMMUNITY-ID/cost-community-id/poi/pre-bestpath
    xpath: aigp/send/cost-community/cost-community-id/poi/pre-bestpath
    tf_name: aigp_send_cost_community_id_poi_pre_bestpath
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: aigp/send/cost-community/COST-COMMUNITY/COST-COMMUNITY-ID/cost-community-id/poi/pre-bestpath/transitive
    xpath: aigp/send/cost-community/cost-community-id/poi/pre-bestpath/transitive
    tf_name: aigp_send_cost_community_id_poi_pre_bestpath_transitive
    exclude_test: true
    example: true
  - yang_name: send-multicast-attributes
    exclude_test: true
    example: true
  - yang_name: send-multicast-attributes/disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: accept-own
    example: true
  - yang_name: accept-own/inheritance-disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: slow-peer/SLOW-PEER/DYNAMIC/dynamic
    xpath: slow-peer/dynamic
    tf_name: slow_peer_dynamic
    example: true
  - yang_name: slow-peer/SLOW-PEER/DYNAMIC/dynamic/threshold
    xpath: slow-peer/dynamic/threshold
    tf_name: slow_peer_dynamic_threshold
    example: 260
  - yang_name: slow-peer/SLOW-PEER/DYNAMIC/dynamic/disable
    xpath: slow-peer/dynamic/disable
    tf_name: slow_peer_dynamic_disable
    exclude_test: true
    example: true
  - yang_name: slow-peer/SLOW-PEER/STATIC/static
    xpath: slow-peer/static
    tf_name: slow_peer_static
    exclude_test: true
    example: true
  - yang_name: origin-as/validation/disable
    exclude_test: true
    example: true
  - yang_name: bestpath/origin-as/allow/invalid
    exclude_test: true
    example: true

test_prerequisites:
  - path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=65001]
    attributes:
      - name: as-number
        value: 65001
    lists:
      - name: address-families/address-family
        key: af-name
        items:
          - attributes:
              - name: af-name
                value: vpnv4-unicast
      - name: neighbors/neighbor
        key: address
        items:
          - attributes:
              - name: address
                value: 10.1.1.2
              - name: remote-as
                value: 65001
  - path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=65001]
    attributes:
      - name: as-number
        value: 65001
    lists:
      - name: address-families/address-family
        key: af-name
        items:
          - attributes:
              - name: af-name
                value: vpnv6-unicast
  - path: Cisco-IOS-XR-um-route-policy-cfg:/routing-policy/route-policies/route-policy[route-policy-name=ROUTE_POLICY_1]
    attributes:
      - name: route-policy-name
        value: ROUTE_POLICY_1
      - name: rpl-route-policy
        value: "route-policy ROUTE_POLICY_1\\n  pass\\nend-policy\\n"
