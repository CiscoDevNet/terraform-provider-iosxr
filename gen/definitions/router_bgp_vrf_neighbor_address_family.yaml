---
name: Router BGP VRF Neighbor Address Family
path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=%s]/vrfs/vrf[vrf-name=%s]/neighbors/neighbor[address=%s]/address-families/address-family[af-name=%s]
doc_category: BGP
attributes:
  - yang_name: as-number
    example: 65001
  - yang_name: vrf-name
    reference: true
    example: VRF1
  - yang_name: address
    example: 10.1.1.2
  - yang_name: af-name
    example: ipv4-unicast
  - yang_name: route-policy/in
    example: ROUTE_POLICY_1
  - yang_name: route-policy/out
    example: ROUTE_POLICY_1
  - yang_name: default-originate/DEFAULT-ORIGINATE/ROUTE-POLICY/route-policy
    tf_name: default_originate_route_policy
    xpath: default-originate/route-policy
    delete_parent: true
    exclude_test: true
    example: ROUTE_POLICY_1
  - yang_name: default-originate/DEFAULT-ORIGINATE/INHERITANCE-DISABLE/inheritance-disable
    tf_name: default_originate_inheritance_disable
    xpath: default-originate/inheritance-disable
    delete_parent: true
    exclude_test: true
    example: true
  - yang_name: next-hop-self
    example: true
  - yang_name: next-hop-self/inheritance-disable
    example: true
  - yang_name: soft-reconfiguration/inbound/always
    example: true
  - yang_name: send-community-ebgp/inheritance-disable
    example: true
  - yang_name: remove-private-as/inbound
    tf_name: remove_private_as_inbound
    example: true
  - yang_name: remove-private-as/inbound/inheritance-disable
    tf_name: remove_private_as_inbound_inheritance_disable
    example: true
    exclude_test: true
  - yang_name: remove-private-as/inbound/entire-aspath
    tf_name: remove_private_as_inbound_entire_aspath
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound
    tf_name: remove_private_as
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound/entire-aspath
    tf_name: remove_private_as_entire_aspath
    example: true
  - yang_name: remove-private-as/remove-private-as-outbound/inheritance-disable
    tf_name: remove_private_as_inheritance_disable
    example: true
    exclude_test: true
  - yang_name: remove-private-as/remove-private-as-outbound/internal
    tf_name: remove_private_as_internal
    example: true
    exclude_test: true

test_prerequisites:
  - path: Cisco-IOS-XR-um-vrf-cfg:/vrfs/vrf[vrf-name=VRF1]/Cisco-IOS-XR-um-router-bgp-cfg:rd/Cisco-IOS-XR-um-router-bgp-cfg:two-byte-as
    attributes:
      - name: two-byte-as-number
        value: 1
      - name: asn2-index
        value: 1
  - path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=65001]
    attributes:
      - name: as-number
        value: 65001
    lists:
      - name: address-families/address-family
        key: af-name
        items:
          - attributes:
              - name: af-name
                value: vpnv4-unicast
  - path: Cisco-IOS-XR-um-router-bgp-cfg:/router/bgp/as[as-number=65001]/vrfs/vrf[vrf-name=VRF1]
    no_delete: true
    attributes:
      - name: vrf-name
        value: VRF1
    lists:
      - name: address-families/address-family
        key: af-name
        items:
          - attributes:
              - name: af-name
                value: ipv4-unicast
      - name: neighbors/neighbor
        key: address
        items:
          - attributes:
              - name: address
                value: 10.1.1.2
              - name: remote-as
                value: 65002
    dependencies: [0, 1]
  - path: Cisco-IOS-XR-um-route-policy-cfg:/routing-policy/route-policies/route-policy[route-policy-name=ROUTE_POLICY_1]
    attributes:
      - name: route-policy-name
        value: ROUTE_POLICY_1
      - name: rpl-route-policy
        value: "route-policy ROUTE_POLICY_1\\n  pass\\nend-policy\\n"
